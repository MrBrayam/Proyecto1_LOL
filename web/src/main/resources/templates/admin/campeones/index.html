<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Administrar Campeones - League of Legends</title>
    <link rel="icon" type="image/svg+xml" th:href="@{/favicon.svg}">
    <link rel="shortcut icon" type="image/svg+xml" th:href="@{/favicon.svg}">
    <link rel="stylesheet" type="text/css" th:href="@{/css/normalize.css?v=4.0}">
    <link rel="stylesheet" type="text/css" th:href="@{/css/base.css?v=4.0}">
    <link rel="stylesheet" type="text/css" th:href="@{/css/admin.css?v=4.0}">
</head>
<body class="admin-body">
    <main>
        <div class="admin-container">
            <h1>Administrar Campeones</h1>
            
            <div class="admin-nav">
                <a th:href="@{/admin/campeones/form}" class="btn btn-primary">Agregar Nuevo Campeón</a>
                <a th:href="@{/admin/dashboard}" class="btn btn-secondary">Volver al Dashboard</a>
                <a th:href="@{/}" class="btn btn-secondary">Volver al Sitio</a>
            </div>

            <!-- Mensajes de éxito o error -->
            <div th:if="${mensaje}" class="alert alert-success">
                <span th:text="${mensaje}">Mensaje de éxito</span>
            </div>
            
            <div th:if="${error}" class="alert alert-error">
                <span th:text="${error}">Mensaje de error</span>
            </div>

            <table class="admin-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Imagen</th>
                        <th>Nombre</th>
                        <th>Descripción</th>
                        <th>Estado</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="campeon : ${campeones}" th:class="${campeon.estado == 0} ? 'campeon-inactivo' : ''">
                        <td th:text="${campeon.idCampeon}">ID</td>
                        <td>
                            <img th:if="${campeon.rutaimg}" 
                                 th:src="${campeon.rutaimg}" 
                                 alt="Imagen" 
                                 class="campeon-thumb">
                            <span th:unless="${campeon.rutaimg}" class="sin-imagen">Sin imagen</span>
                        </td>
                        <td th:text="${campeon.nombreCampeon}">Nombre</td>
                        <td th:text="${campeon.descripcionCampeon}">Descripción</td>
                        <td>
                            <span th:if="${campeon.estado == 1}" class="estado-activo">Activo</span>
                            <span th:if="${campeon.estado == 0}" class="estado-inactivo">Inactivo</span>
                        </td>
                        <td>
                            <a th:href="@{'/admin/campeones/editar/' + ${campeon.idCampeon}}" class="btn btn-warning">Editar</a>
                            
                            <a th:if="${campeon.estado == 1}"
                               th:href="@{'/admin/campeones/desactivar/' + ${campeon.idCampeon}}" 
                               class="btn btn-danger"
                               onclick="return confirm('¿Desactivar este campeón? No se mostrará en la lista pública.')">Desactivar</a>
                            
                            <a th:if="${campeon.estado == 0}"
                               th:href="@{'/admin/campeones/activar/' + ${campeon.idCampeon}}" 
                               class="btn btn-success"
                               onclick="return confirm('¿Activar este campeón? Se mostrará en la lista pública.')">Activar</a>
                        </td>
                    </tr>
                </tbody>
            </table>

            <div th:if="${#lists.isEmpty(campeones)}" class="no-data-message">
                <p>No hay campeones registrados</p>
                <a th:href="@{/admin/campeones/form}" class="btn btn-primary">Agregar el primer campeón</a>
            </div>
            
            <!-- Información de paginación -->
            <div th:if="${totalElements != null and totalElements > 0}" class="pagination-info">
                <p>Mostrando <span th:text="${#lists.size(campeones)}">0</span> de 
                   <span th:text="${totalElements}">0</span> campeones (Página <span th:text="${(currentPage ?: 0) + 1}">1</span> de <span th:text="${totalPages ?: 1}">1</span>)</p>
            </div>
            
            <!-- Controles de paginación -->
            <div th:if="${totalPages != null and totalPages > 1}" class="pagination-container">
                <nav class="pagination">
                    <!-- Botón anterior -->
                    <a th:if="${currentPage > 0}" 
                       th:href="@{/admin/campeones(page=${currentPage - 1}, size=${size})}" 
                       class="pagination-btn">« Anterior</a>
                    
                    <!-- Números de página (limitados para responsive) -->
                    <span th:each="i : ${#numbers.sequence(0, totalPages - 1)}"
                          th:if="${i >= (currentPage - 2 >= 0 ? currentPage - 2 : 0) and i <= (currentPage + 2 < totalPages ? currentPage + 2 : totalPages - 1)}">
                        <a th:if="${i != currentPage}" 
                           th:href="@{/admin/campeones(page=${i}, size=${size})}"
                           th:text="${i + 1}"
                           class="pagination-btn">1</a>
                        <span th:if="${i == currentPage}" 
                              th:text="${i + 1}"
                              class="pagination-btn pagination-current">1</span>
                    </span>
                    
                    <!-- Botón siguiente -->
                    <a th:if="${currentPage < totalPages - 1}" 
                       th:href="@{/admin/campeones(page=${currentPage + 1}, size=${size})}" 
                       class="pagination-btn">Siguiente »</a>
                </nav>
            </div>
        </div>
    </main>
</body>
</html>